"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[801],{3144:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var n=t(4165),i=t(5861),r=t(2791),s=t(6871),c=t(1708),o="NewAnnouncement_new-announcement-container__EEbYD",l="NewAnnouncement_form-container__yZp7f",d=t(6814),u=t(8932),p=t(885),m="ImageInput_img-form__GnhPT",g="ImageInput_input-controller__oC9kg",f="ImageInput_img-preview__EInIg",v=t(184),x=function(e){var a=(0,r.useState)(),t=(0,p.Z)(a,2),n=t[0],i=t[1],s=(0,r.useState)(!1),c=(0,p.Z)(s,2),o=c[0],l=c[1],d=(0,r.useState)(),x=(0,p.Z)(d,2),b=x[0],h=x[1],j=(0,r.useRef)(),Z=e.id,y=e.onInput;(0,r.useEffect)((function(){if(y(Z,n,o),n){var e=new FileReader;e.onload=function(){h(e.result)},e.readAsDataURL(n)}}),[n]);return(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)("input",{id:e.id,type:"file",accept:".jpg,.png,.jpeg",ref:j,onChange:function(e){var a,t=o;e.target.files&&1===e.target.files.length?(a=e.target.files[0],i(a),l(!0),t=!0):(l(!1),t=!1),y(Z,a,t)},style:{display:"none"}}),(0,v.jsxs)("div",{className:g,children:[(0,v.jsx)("div",{className:f,children:b?(0,v.jsx)("img",{src:b,alt:"Preview"}):(0,v.jsx)("p",{className:"title-text",children:"\u2193choose image\u2193"})}),(0,v.jsx)(u.Z,{onClick:function(){j.current.click()},children:"pick image"})]})]})},b=t(4160),h=t(5320),j=t(3943),Z=t(1302),y=t(3760),I=t(9434),_=function(){var e=(0,s.s0)(),a=(0,I.v9)((function(e){return e.user})),t=(0,Z.Z)(),r=t.isLoading,p=t.sendRequest,m=t.error,g=t.clearError,f=(0,j.Z)({title:{value:"",isValid:!1},address:{value:"",isValid:!1},price:{value:0,isValid:!1},category:{value:"",isValid:!1},image:{value:null,isValid:!1},description:{value:"",isValid:!1}},!1),_=f.formState,w=f.inputHandler,k=function(){var t=(0,i.Z)((0,n.Z)().mark((function t(i){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.preventDefault(),(r=new FormData).append("title",_.inputs.title.value),r.append("description",_.inputs.description.value),r.append("address",_.inputs.address.value),r.append("category",_.inputs.category.value),r.append("price",_.inputs.price.value),r.append("image",_.inputs.image.value),r.append("creator",a.userId),t.prev=9,t.next=12,p("/api/announcement/new-announcement","POST",{Authorization:"Bearer "+a.token},r);case 12:e("/account"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e){return t.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:o,children:[(0,v.jsx)("h1",{className:"title-text",children:"add announcement"}),(0,v.jsx)("div",{className:l,children:(0,v.jsxs)("form",{onSubmit:k,children:[(0,v.jsx)(d.Z,{id:"title",element:"input",type:"text",label:"Title",errorText:"Please enter a valid title.",onInput:w,validators:[(0,c.hg)()]}),(0,v.jsx)(d.Z,{id:"address",element:"input",type:"text",label:"Address",errorText:"Please enter a valid address.",onInput:w,validators:[(0,c.hg)()]}),(0,v.jsx)(d.Z,{id:"price",element:"input",type:"number",label:"Price [z\u0142]",errorText:"Please enter a valid price.",onInput:w,validators:[(0,c.hg)()]}),(0,v.jsx)(d.Z,{id:"category",element:"select",onInput:w,validators:[(0,c.hg)()],errorText:"Please enter a valid categpry.",label:"Category",children:y.b.map((function(e){return(0,v.jsx)("option",{value:e.name,children:e.name},e.id)}))}),(0,v.jsx)(x,{id:"image",onInput:w}),(0,v.jsx)(d.Z,{id:"description",element:"textarea",type:"text",label:"Description",errorText:"Please enter a valid description. (10 characters required)",onInput:w,validators:[(0,c.CP)(10)]}),m&&(0,v.jsx)(h.Z,{clearError:g}),(0,v.jsx)(u.Z,{disabled:!_.isValid,type:"submit",children:r?(0,v.jsx)(b.Z,{}):"add"})]})})]})}},3760:function(e){e.exports=JSON.parse('{"b":[{"id":"cb24db10-3630-430e-9afb-846492bf5ab8","name":"motorization","color":"#ffce32","image":"./assets/categories/motorization-img.png"},{"id":"bcc4c3d3-25a5-438c-81ca-e60f913c323c","name":"sport","color":"rgb(35, 229, 219)","image":"./assets/categories/sport-img.png"},{"id":"ed83f0a6-ea1e-4855-9967-a8a3911b5992","name":"fashion","color":"rgb(200, 248, 246)","image":"./assets/categories/faschion-img.png"},{"id":"09d2425b-dc74-42d7-826b-efc4343e7cbc","name":"work","color":"rgb(255, 86, 54)","image":"./assets/categories/work-img.png"},{"id":"a77e9d6a-71cb-402c-a26d-c156f99169d7","name":"home","color":"rgb(255, 246, 217)","image":"./assets/categories/home-img.png"},{"id":"a2f4aadf-2dab-4f70-9193-b7342f55c008","name":"music","color":"rgb(255, 206, 50)","image":"./assets/categories/music-img.png"}]}')}}]);
//# sourceMappingURL=801.209532f5.chunk.js.map